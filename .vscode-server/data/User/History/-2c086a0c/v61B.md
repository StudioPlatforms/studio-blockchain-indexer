# Studio Blockchain Indexer API Guide

This guide provides comprehensive examples for using the Studio Blockchain Indexer API. All examples use `curl` for demonstration, but the same endpoints can be used with any HTTP client in your application.

Base URL: `https://mainnetindexer.studio-blockchain.com`

## Table of Contents

- [Health and Status](#health-and-status)
- [Block Endpoints](#block-endpoints)
- [Transaction Endpoints](#transaction-endpoints)
- [Address Endpoints](#address-endpoints)
- [Token Endpoints](#token-endpoints)
- [NFT Endpoints](#nft-endpoints)
- [Search Endpoint](#search-endpoint)
- [RPC Proxy](#rpc-proxy)
- [Common Use Cases](#common-use-cases)

## Health and Status

### Get Indexer Health and Status

```bash
curl -s https://mainnetindexer.studio-blockchain.com/health
```

Example response:
```json
{
  "status": "ok",
  "lastBlock": 5698,
  "isIndexing": true
}
```

This endpoint is useful for:
- Checking if the indexer is running
- Getting the latest processed block number
- Determining if the indexer is actively processing blocks

## Block Endpoints

### Get Latest Blocks

```bash
# Get the 10 most recent blocks
curl -s https://mainnetindexer.studio-blockchain.com/blocks

# Get 5 most recent blocks
curl -s https://mainnetindexer.studio-blockchain.com/blocks?limit=5

# Get the next 5 blocks (pagination)
curl -s https://mainnetindexer.studio-blockchain.com/blocks?limit=5&offset=5
```

### Get Block by Number

```bash
# Get block #5698
curl -s https://mainnetindexer.studio-blockchain.com/blocks/5698
```

Example response:
```json
{
  "number": 5698,
  "hash": "0xe4bbf63bdb452659a4a26fba1a52db9d1d6b2223629a38398f690423fc5df63c",
  "parentHash": "0x9bd417c66bd6354be436c503e5a2839ceb0c2a0f9ccc1716a47f0ef9febf3a31",
  "timestamp": 1741977291,
  "nonce": "0x0000000000000000",
  "difficulty": {
    "type": "BigNumber",
    "hex": "0x02"
  },
  "gasLimit": {
    "type": "BigNumber",
    "hex": "0x01c9c380"
  },
  "gasUsed": {
    "type": "BigNumber",
    "hex": "0x00"
  },
  "miner": "0x0000000000000000000000000000000000000000",
  "extraData": "0xd883010d0e846765746888676f312e32312e36856c696e7578000000000000003edb4628e061837fe9f156d290029c83cf3f9fb85389c3e2ab94908c4df8e5f86fb4e8622d5167d9bdde03b42d3d3a4711794066e1e80881f3b9226d983eb75300",
  "transactions": []
}
```

### Get Block by Hash

```bash
# Get block by hash
curl -s https://mainnetindexer.studio-blockchain.com/blocks/hash/0xe4bbf63bdb452659a4a26fba1a52db9d1d6b2223629a38398f690423fc5df63c
```

## Transaction Endpoints

### Get Latest Transactions

```bash
# Get the 10 most recent transactions
curl -s https://mainnetindexer.studio-blockchain.com/transactions

# Get 5 most recent transactions
curl -s https://mainnetindexer.studio-blockchain.com/transactions?limit=5

# Get the next 5 transactions (pagination)
curl -s https://mainnetindexer.studio-blockchain.com/transactions?limit=5&offset=5
```

### Get Transaction by Hash

```bash
# Get transaction details by hash
curl -s https://mainnetindexer.studio-blockchain.com/transactions/0x4cebd7cc64a116e4998f2c5362423a9964143e191e8afca7ea263a164ebbb24b
```

Example response:
```json
{
  "hash": "0x4cebd7cc64a116e4998f2c5362423a9964143e191e8afca7ea263a164ebbb24b",
  "blockNumber": 38,
  "from": "0xf613f88cf258950938edf668b87993f0235af7a0",
  "to": "0x846c234adc6d8e74353c0c355b0c2b6a1e46634f",
  "value": {
    "type": "BigNumber",
    "hex": "0x8ac7230489e80000"
  },
  "gasLimit": {
    "type": "BigNumber",
    "hex": "0x5208"
  },
  "gasPrice": {
    "type": "BigNumber",
    "hex": "0x3c295038"
  },
  "data": "0x",
  "nonce": 0,
  "transactionIndex": 0,
  "status": true,
  "timestamp": 1741610484
}
```

### Get Transaction Receipt

```bash
# Get transaction receipt
curl -s https://mainnetindexer.studio-blockchain.com/transactions/0x4cebd7cc64a116e4998f2c5362423a9964143e191e8afca7ea263a164ebbb24b/receipt
```

### Get Pending Transactions

```bash
# Get pending transactions
curl -s https://mainnetindexer.studio-blockchain.com/transactions/pending
```

## Address Endpoints

### Get Transactions by Address

```bash
# Get transactions for a specific address (default limit: 10)
curl -s https://mainnetindexer.studio-blockchain.com/address/0xf613f88cf258950938edf668b87993f0235af7a0/transactions

# Get 5 transactions for a specific address
curl -s https://mainnetindexer.studio-blockchain.com/address/0xf613f88cf258950938edf668b87993f0235af7a0/transactions?limit=5

# Get the next 5 transactions (pagination)
curl -s https://mainnetindexer.studio-blockchain.com/address/0xf613f88cf258950938edf668b87993f0235af7a0/transactions?limit=5&offset=5
```

### Get Address Type

```bash
# Check if an address is a wallet or contract
curl -s https://mainnetindexer.studio-blockchain.com/address/0xf613f88cf258950938edf668b87993f0235af7a0/type
```

Example response:
```json
{
  "address": "0xf613f88cf258950938edf668b87993f0235af7a0",
  "type": "wallet"
}
```

For a contract address, the response would include additional information:
```json
{
  "address": "0x846c234adc6d8e74353c0c355b0c2b6a1e46634f",
  "type": "contract",
  "contractType": "ERC20"
}
```

### Get Account Balances

```bash
# Get account balances
curl -s https://mainnetindexer.studio-blockchain.com/address/0xf613f88cf258950938edf668b87993f0235af7a0/balances
```

### Get Token Transfers by Address

```bash
# Get token transfers for an address
curl -s https://mainnetindexer.studio-blockchain.com/address/0xf613f88cf258950938edf668b87993f0235af7a0/tokens

# Filter by token type (ERC20, ERC721, ERC1155)
curl -s https://mainnetindexer.studio-blockchain.com/address/0xf613f88cf258950938edf668b87993f0235af7a0/tokens?type=ERC20
```

## Token Endpoints

### Get Token Transfers

```bash
# Get transfers for a specific token
curl -s https://mainnetindexer.studio-blockchain.com/tokens/0x846c234adc6d8e74353c0c355b0c2b6a1e46634f/transfers

# Limit to 5 transfers
curl -s https://mainnetindexer.studio-blockchain.com/tokens/0x846c234adc6d8e74353c0c355b0c2b6a1e46634f/transfers?limit=5
```

## NFT Endpoints

### Get NFT Collections

```bash
# Get all NFT collections
curl -s https://mainnetindexer.studio-blockchain.com/nfts

# Limit to 5 collections
curl -s https://mainnetindexer.studio-blockchain.com/nfts?limit=5
```

### Get NFT Collection Details

```bash
# Get details for a specific NFT collection
curl -s https://mainnetindexer.studio-blockchain.com/nfts/0x846c234adc6d8e74353c0c355b0c2b6a1e46634f
```

### Get NFT Metadata

```bash
# Get metadata for a specific NFT
curl -s https://mainnetindexer.studio-blockchain.com/nfts/0x846c234adc6d8e74353c0c355b0c2b6a1e46634f/1
```

### Get NFTs Owned by Address

```bash
# Get all NFTs owned by an address
curl -s https://mainnetindexer.studio-blockchain.com/address/0xf613f88cf258950938edf668b87993f0235af7a0/nfts

# Filter by token address
curl -s https://mainnetindexer.studio-blockchain.com/address/0xf613f88cf258950938edf668b87993f0235af7a0/nfts?tokenAddress=0x846c234adc6d8e74353c0c355b0c2b6a1e46634f
```

### Get NFT Transfers by Address

```bash
# Get NFT transfers for an address
curl -s https://mainnetindexer.studio-blockchain.com/address/0xf613f88cf258950938edf668b87993f0235af7a0/nft-transfers

# Filter by token type (ERC721 or ERC1155)
curl -s https://mainnetindexer.studio-blockchain.com/address/0xf613f88cf258950938edf668b87993f0235af7a0/nft-transfers?tokenType=ERC721
```

## Search Endpoint

```bash
# Search for a block, transaction, or address
curl -s "https://mainnetindexer.studio-blockchain.com/search?q=0x4cebd7cc64a116e4998f2c5362423a9964143e191e8afca7ea263a164ebbb24b"
```

Example response for a transaction:
```json
{
  "type": "transaction",
  "data": {
    "hash": "0x4cebd7cc64a116e4998f2c5362423a9964143e191e8afca7ea263a164ebbb24b",
    "blockNumber": 38,
    "from": "0xf613f88cf258950938edf668b87993f0235af7a0",
    "to": "0x846c234adc6d8e74353c0c355b0c2b6a1e46634f",
    "value": {
      "type": "BigNumber",
      "hex": "0x8ac7230489e80000"
    },
    "gasLimit": {
      "type": "BigNumber",
      "hex": "0x5208"
    },
    "gasPrice": {
      "type": "BigNumber",
      "hex": "0x3c295038"
    },
    "data": "0x",
    "nonce": 0,
    "transactionIndex": 0,
    "status": true,
    "timestamp": 1741610484
  }
}
```

## RPC Proxy

```bash
# Use the RPC proxy to make direct blockchain calls
curl -s -X POST -H "Content-Type: application/json" --data '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}' https://mainnetindexer.studio-blockchain.com/proxy/rpc
```

## Common Use Cases

### Get Total Number of Transactions

The indexer doesn't have a direct endpoint for this, but you can use the database's `getTotalTransactions` method. For a frontend application, you could:

1. Get the latest block number from the health endpoint
2. Estimate the total number of transactions based on the average number of transactions per block
3. Or implement a custom endpoint on your application server that queries the database directly

### Calculate Transaction Amount

To get the transaction amount in a human-readable format:

```javascript
// Example in JavaScript
const txResponse = await fetch('https://mainnetindexer.studio-blockchain.com/transactions/0x4cebd7cc64a116e4998f2c5362423a9964143e191e8afca7ea263a164ebbb24b');
const tx = await txResponse.json();

// Convert the hex value to a decimal
const valueInWei = BigInt(tx.value.hex);

// Convert Wei to Ether (1 Ether = 10^18 Wei)
const valueInEther = Number(valueInWei) / 1e18;

console.log(`Transaction amount: ${valueInEther} ETH`);
```

### Get Account Transaction History with Values

```javascript
// Example in JavaScript
async function getAccountHistory(address) {
  const response = await fetch(`https://mainnetindexer.studio-blockchain.com/address/${address}/transactions?limit=50`);
  const transactions = await response.json();
  
  return transactions.map(tx => {
    const valueInWei = BigInt(tx.value.hex);
    const valueInEther = Number(valueInWei) / 1e18;
    
    return {
      hash: tx.hash,
      blockNumber: tx.blockNumber,
      timestamp: new Date(tx.timestamp * 1000).toISOString(),
      from: tx.from,
      to: tx.to,
      value: valueInEther,
      isIncoming: tx.to.toLowerCase() === address.toLowerCase(),
      status: tx.status ? 'Confirmed' : 'Failed'
    };
  });
}
```

### Track Token Transfers for an Address

```javascript
// Example in JavaScript
async function getTokenActivity(address) {
  const response = await fetch(`https://mainnetindexer.studio-blockchain.com/address/${address}/tokens?limit=50`);
  const transfers = await response.json();
  
  return transfers.map(transfer => {
    return {
      transactionHash: transfer.transactionHash,
      blockNumber: transfer.blockNumber,
      timestamp: new Date(transfer.timestamp * 1000).toISOString(),
      tokenAddress: transfer.tokenAddress,
      from: transfer.fromAddress,
      to: transfer.toAddress,
      value: transfer.value,
      tokenType: transfer.tokenType,
      tokenId: transfer.tokenId,
      isIncoming: transfer.toAddress.toLowerCase() === address.toLowerCase()
    };
  });
}
```

### Get NFT Portfolio for an Address

```javascript
// Example in JavaScript
async function getNFTPortfolio(address) {
  const response = await fetch(`https://mainnetindexer.studio-blockchain.com/address/${address}/nfts?limit=100`);
  const nfts = await response.json();
  
  // Group NFTs by collection
  const collections = {};
  
  for (const nft of nfts) {
    if (!collections[nft.tokenAddress]) {
      // Get collection info
      const collectionResponse = await fetch(`https://mainnetindexer.studio-blockchain.com/nfts/${nft.tokenAddress}`);
      const collection = await collectionResponse.json();
      
      collections[nft.tokenAddress] = {
        address: nft.tokenAddress,
        name: collection.name || 'Unknown Collection',
        symbol: collection.symbol || '???',
        items: []
      };
    }
    
    collections[nft.tokenAddress].items.push({
      tokenId: nft.tokenId,
      name: nft.name || `#${nft.tokenId}`,
      description: nft.description,
      imageUrl: nft.imageUrl,
      metadata: nft.metadata
    });
  }
  
  return Object.values(collections);
}
```

### Search for Transactions, Blocks, or Addresses

```javascript
// Example in JavaScript
async function search(query) {
  const response = await fetch(`https://mainnetindexer.studio-blockchain.com/search?q=${query}`);
  const result = await response.json();
  
  if (result.error) {
    return { found: false, message: 'No results found' };
  }
  
  return {
    found: true,
    type: result.type, // 'block', 'transaction', or 'address'
    data: result.data
  };
}
```

## Working with BigNumber Values

Many numeric values in the API responses are returned as BigNumber objects with a hex value. To convert these to usable numbers:

```javascript
// For values that fit in JavaScript's Number type (up to 2^53 - 1)
const gasPrice = parseInt(tx.gasPrice.hex, 16);

// For larger values (like token amounts), use BigInt
const valueInWei = BigInt(tx.value.hex);
const valueInEther = Number(valueInWei) / 1e18; // Only convert to Number for display if safe
```

## Error Handling

All endpoints return a JSON response with an `error` field when an error occurs:

```json
{
  "error": "Transaction not found"
}
```

Your application should check for the presence of an `error` field in the response and handle it accordingly.
